# Paynet Logs View

## Overview

The Paynet Logs View provides a comprehensive interface for monitoring and analyzing Paynet FPX payment transactions. Similar to the Cardzone logs, this view offers detailed insights into payment processing, debugging information, and transaction history.

## Access

Navigate to: **Admin Panel â†’ Development â†’ Paynet Logs**

## Features

### ðŸ“Š Log Types

1. **Main Logs** (`paynet.log`)
   - Payment requests created
   - Callbacks received
   - Basic transaction information
   - Error messages

2. **Transaction Logs** (`paynet_transactions.log`)
   - Complete FPX payloads
   - Gateway redirect URLs
   - Callback data
   - Transaction status updates
   - Complete payload structure

3. **Debug Logs** (`paynet_debug.log`)
   - Private key loading status
   - Environment configuration
   - API URLs and settings
   - Debug information

### ðŸ” Search & Filter

- **Search Bar**: Search by transaction ID, message, or action
- **Quick Filters**: 
  - All
  - Success
  - Error
  - Warning
  - FPX
  - Callback

### ðŸ“‹ Actions

- **Refresh Logs**: Update the current view
- **Download**: Export logs as text files
- **View Details**: Click on any log entry to see full details

## Log Structure

### Main Log Format
```
[2025-07-30 18:34:51] local.INFO: FPX Payment Request Created {
  "transaction_id": "PNT20250730183451RyMidy000001",
  "amount": "50",
  "bank": "MB2U0227",
  "merchant_id": "EX00010946",
  "environment": "prod",
  "donor_name": "Test User",
  "donor_email": "test@example.com"
}
```

### Transaction Log Format
```
[2025-07-30 18:34:51] local.INFO: FPX Transaction Details {
  "transaction_id": "PNT20250730183451RyMidy000001",
  "amount": "50",
  "bank": "MB2U0227",
  "merchant_id": "EX00010946",
  "environment": "prod",
  "payload_keys": [...],
  "complete_payload": {...}
}
```

### Debug Log Format
```
[2025-07-30 18:34:51] local.INFO: FPX Debug Information {
  "transaction_id": "PNT20250730183451RyMidy000001",
  "environment": "prod",
  "merchant_id": "EX00010946",
  "api_url": "https://sandbox.api.paynet.my",
  "gateway_url": "https://www.mepsfpx.com.my/FPXMain/seller2DReceiver.jsp",
  "callback_url": "http://localhost:8000/payment/paynet/callback",
  "timeout": "60",
  "retry_attempts": "5"
}
```

## Color Coding

- **Green**: Success messages
- **Red**: Error messages
- **Yellow**: Warning messages
- **Blue**: FPX-related messages
- **Purple**: Callback messages
- **Gray**: General information

## File Locations

- **Main Logs**: `storage/logs/paynet.log`
- **Transaction Logs**: `storage/logs/paynet_transactions.log`
- **Debug Logs**: `storage/logs/paynet_debug.log`

## Command Line Monitoring

Use the monitoring script for real-time log viewing:

```bash
# Monitor all Paynet logs
./scripts/monitor-paynet-logs.sh

# Monitor specific log types
./scripts/monitor-paynet-logs.sh main
./scripts/monitor-paynet-logs.sh transactions
./scripts/monitor-paynet-logs.sh debug
```

## Troubleshooting

### Common Issues

1. **No logs appearing**
   - Check if log files exist in `storage/logs/`
   - Verify file permissions
   - Ensure logging is enabled in `.env`

2. **Logs not updating**
   - Refresh the page
   - Check if new transactions are being processed
   - Verify the log files are being written to

3. **Download not working**
   - Check file permissions
   - Ensure the log files exist
   - Verify the route is accessible

### Log Analysis

- **Transaction Failures**: Look for "ERROR" level messages
- **Payment Processing**: Check "FPX" and "Success" filters
- **Callback Issues**: Use "Callback" filter
- **Configuration Problems**: Review debug logs for environment settings

## Integration with PaynetService

The logs are automatically generated by the `PaynetService` class:

```php
// Main logs
Log::channel('paynet')->info('FPX Payment Request Created', [...]);

// Transaction logs
Log::channel('paynet_transactions')->info('FPX Transaction Details', [...]);

// Debug logs
Log::channel('paynet_debug')->info('FPX Debug Information', [...]);
```

## Security

- Logs are only accessible to authenticated admin users
- Sensitive data (like private keys) are not logged
- Log files are stored securely in `storage/logs/`
- Download functionality respects user permissions 